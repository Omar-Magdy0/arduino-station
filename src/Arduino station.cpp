#include <Arduino.h>
#include "applicationManager.h"
#include "lightDisplayLib/lightDisplay.h"

// 'BIGANT LOGO', 128x64px
const unsigned char BIGANT_LOGO [] PROGMEM = {
	0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0xfe, 0x3e, 0x7e, 0xfe, 0xfc, 0xf8, 0xf0, 0xe0, 0xfe, 
	0x00, 0x02, 0x02, 0x02, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x02, 0x02, 0x02, 0x02, 0xfc, 0xfe, 0xfe, 
	0xfe, 0xfe, 0x42, 0x62, 0xfe, 0xfe, 0xfe, 0xfe, 0xbc, 0x00, 0xf8, 0xfc, 0xfc, 0xfe, 0xfe, 0x06, 
	0x02, 0x0e, 0xfe, 0xfc, 0xfc, 0xf8, 0xf0, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x02, 0x06, 0xfe, 
	0xfe, 0xfc, 0xfc, 0xf0, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0xfe, 0x00, 0xf8, 
	0xfc, 0xfe, 0xfe, 0xfe, 0x06, 0x02, 0x02, 0x04, 0x9c, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 
	0x1e, 0x3e, 0xfe, 0xfe, 0xfc, 0xf8, 0xe0, 0xe0, 0xfc, 0xf0, 0xfc, 0xfc, 0xfe, 0xfe, 0xfe, 0x06, 
	0xc2, 0xc6, 0xcc, 0xd0, 0xc0, 0x00, 0x00, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x07, 0x00, 0x00, 
	0x01, 0x03, 0x07, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 
	0x00, 0x00, 0x00, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 
	0x01, 0x03, 0x03, 0x07, 0x07, 0x06, 0x04, 0x07, 0x07, 0x07, 0x03, 0x03, 0x00, 0x00, 0x07, 0x07, 
	0x07, 0x07, 0x07, 0x04, 0x04, 0x07, 0x07, 0x03, 0x03, 0x00, 0x00, 0x03, 0x07, 0x07, 0x07, 0x07, 
	0x06, 0x04, 0x04, 0x03, 0x00, 0x01, 0x03, 0x07, 0x07, 0x07, 0x06, 0x04, 0x04, 0x06, 0x03, 0x00, 
	0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x07, 0x07, 0x00, 
	0x03, 0x03, 0x07, 0x07, 0x07, 0x04, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00
};

// Array of all bitmaps for convenience. (Total bytes used to store images in PROGMEM = 1040)
lightDisplay dispS = lightDisplay(128,64,&Wire);
  int i = 0;int j = 0;
   void display1(){
        dispS.fillCircleHelp(64,32,20,1,WHITE);
        dispS.Vline(0,63,i,WHITE);
        dispS.Vline(0,63,i + 10,WHITE);
        dispS.Vline(0,63,i + 20,WHITE);
        dispS.Vline(0,63,i + 30,WHITE);
        dispS.Vline(0,63,i + 40,WHITE);
        dispS.Vline(0,63,i + 50,WHITE);
        dispS.Hline(0,127,j,WHITE);
        dispS.Hline(0,127,j + 5,WHITE);
        dispS.Hline(0,127,j + 10,WHITE);
        dispS.Hline(0,127,j + 15,WHITE);
        dispS.Hline(0,127,j + 20,WHITE);
        dispS.Hline(0,127,j + 25,WHITE);
   }



int main(){
    clk1CountMillis(START);
    defaultBootLoader();
    Serial.begin(115200);
    if(dispS.begin()){Serial.println("SCREEN INITIALIZED");}

    Serial.println(globalTimeMillis);
    dispS.displayFunctionGroup(0,7,display1);
    Serial.println(globalTimeMillis);
    int sec = 1;
    int dec = 2;
    while(1){i+=dec;j+=sec;
    if(j > 39)sec = -2;
    if(j < 0)sec = 2;
    if(i > 77)dec = -2;
    if(i < 0)dec = 2;  
    Serial.println(globalTimeMillis);
    dispS.displayFunctionGroup(0,7,display1);
    Serial.println(globalTimeMillis);


/*      
        atomicDebounceReEnable(); 
        if(APMNGCTRL & (1<<APRNNG)){
          appFunction();
        }
        else{
          applicationManager();
        } */
    }

return 0;
}










